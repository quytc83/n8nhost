# 1. Update hệ thống
sudo dnf -y update

# 2. Cài Docker Engine
sudo dnf -y install docker

# 3. Bật và khởi động Docker service
sudo systemctl enable --now docker

# 4. Thêm quyền cho user ec2-user (để chạy docker không cần sudo)
sudo usermod -aG docker ec2-user
newgrp docker   # hoặc logout và login lại SSH

# 5. Cài Docker Compose plugin (v2)
sudo mkdir -p /usr/local/lib/docker/cli-plugins
sudo curl -SL https://github.com/docker/compose/releases/download/v2.27.0/docker-compose-linux-x86_64 \
  -o /usr/local/lib/docker/cli-plugins/docker-compose
sudo chmod +x /usr/local/lib/docker/cli-plugins/docker-compose
docker compose version

# 6. Kiểm tra
docker --version
docker compose version
